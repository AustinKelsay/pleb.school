# --- Application URLs ---
NEXTAUTH_URL="http://localhost:3000"

# --- Database ---
DATABASE_URL="postgresql://plebschool:password@localhost:5432/pleb_school?schema=public"
POSTGRES_DB="pleb_school"
POSTGRES_USER="plebschool"
POSTGRES_PASSWORD="password"

# --- NextAuth ---
# Generate a strong secret for production: openssl rand -base64 32
NEXTAUTH_SECRET="replace-with-strong-secret"

# --- GitHub OAuth (signin) ---
GITHUB_CLIENT_ID="your-github-client-id"
GITHUB_CLIENT_SECRET="your-github-client-secret"

# --- GitHub OAuth (account linking) ---
# Optional: separate app for linking; falls back to signin app if unset
GITHUB_LINK_CLIENT_ID="your-linking-client-id"
GITHUB_LINK_CLIENT_SECRET="your-linking-client-secret"

# --- Email (magic links + notifications) ---
EMAIL_SERVER_HOST="smtp.gmail.com"
EMAIL_SERVER_PORT="465"
EMAIL_SERVER_USER="user@example.com"
EMAIL_SERVER_PASSWORD="app-password-or-secret"
EMAIL_SERVER_SECURE="true" # true for implicit TLS (465), false for STARTTLS
EMAIL_FROM="noreply@example.com"

# --- Upstash / KV (required in production for distributed rate limiting + views) ---
# In production, both vars below must be set. Without them, security-sensitive
# rate-limited endpoints fail closed to avoid unsafe per-instance memory fallback.
KV_REST_API_URL="https://<your-upstash-endpoint>"
KV_REST_API_TOKEN="upstash-rest-token"
# Required in production for /api/views/flush authorization.
# Send via Authorization header: Bearer <VIEWS_CRON_SECRET>
VIEWS_CRON_SECRET="strong-random-string"
# Optional staleness threshold (minutes) for /api/views/flush?status=1 health checks.
# Default: 60 (allowed range: 5-10080)
VIEWS_FLUSH_STALE_AFTER_MINUTES="60"

# --- Audit log maintenance ---
# Secret for /api/audit/maintenance authorization (Bearer token).
# Vercel cron compatibility: set CRON_SECRET to the same value so Vercel injects it automatically.
AUDIT_LOG_CRON_SECRET="strong-random-string"
# Optional retention window in days (default: 90; allowed range: 1-3650)
AUDIT_LOG_RETENTION_DAYS="90"

# --- CORS (required for production) ---
# Comma-separated list of allowed origins for cross-origin requests.
# In production, set this to your actual domain(s).
# If unset, falls back to http://localhost:3000 and http://127.0.0.1:3000 (development defaults).
ALLOWED_ORIGINS=https://yourdomain.com

# --- Nostr Relays (optional) ---
# Comma-separated list of additional relay URLs.
# Supplements relays defined in config/nostr.json.
# ALLOWED_RELAYS="wss://relay1.example.com,wss://relay2.example.com"

# --- Optional feature flags / debugging ---
# PRISMA_LOG_QUERIES="false"
# Enable remote Google Fonts loading at runtime.
# Default behavior when unset:
# - production: false (deterministic, no remote font dependency)
# - development/test: true (designer convenience)
# NEXT_PUBLIC_ENABLE_REMOTE_FONTS="false"

# --- Privkey encryption ---
# PLACEHOLDER: Replace with a securely generated base64 32-byte key in real environments.
# Generate with: openssl rand -base64 32
PRIVKEY_ENCRYPTION_KEY="REPLACE_WITH_BASE64_32_BYTE_KEY"
